<!-- src/pages/purchase-success.astro -->

---
import Layout from '../layouts/Layout.astro';

export const prerender = false;
---

<Layout>
  <main class="container mx-auto max-w-3xl py-16 md:py-24 px-6">
    <!-- Success Message -->
    <div class="text-center mb-12">
      <div class="inline-flex items-center justify-center w-20 h-20 bg-vital-lime rounded-full mb-6">
        <svg class="w-12 h-12 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
        </svg>
      </div>

      <h1 class="text-4xl md:text-5xl font-migra text-brand-black mb-4">
        Purchase Complete!
      </h1>

      <p class="text-xl font-open-sauce text-gray-700 mb-8">
        Thank you for choosing StorySmith Legacy. The journey begins now.
      </p>
    </div>

    <!-- What Happens Next -->
    <section class="bg-warm-parchment border-2 border-brand-navy rounded-lg p-8 md:p-12 mb-12">
      <h2 class="text-3xl font-migra text-brand-black mb-6">What Happens Next</h2>

      <div class="space-y-6">
        <div class="flex items-start gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-brand-navy text-warm-parchment rounded-full flex items-center justify-center font-bold">
            1
          </div>
          <div>
            <h3 class="text-xl font-bold font-open-sauce mb-2">Check Your Email</h3>
            <p class="font-open-sauce text-gray-700">
              You'll receive a confirmation email with your purchase details and next steps within the next few minutes.
            </p>
          </div>
        </div>

        <div class="flex items-start gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-brand-navy text-warm-parchment rounded-full flex items-center justify-center font-bold">
            2
          </div>
          <div>
            <h3 class="text-xl font-bold font-open-sauce mb-2">Gift Certificate Delivery</h3>
            <p class="font-open-sauce text-gray-700" id="delivery-message">
              Your digital gift certificate will be sent to you shortly. If you chose a physical certificate, please allow 5-7 business days for delivery.
            </p>
          </div>
        </div>

        <div class="flex items-start gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-brand-navy text-warm-parchment rounded-full flex items-center justify-center font-bold">
            3
          </div>
          <div>
            <h3 class="text-xl font-bold font-open-sauce mb-2">Personal Discovery Session</h3>
            <p class="font-open-sauce text-gray-700">
              Our team will reach out within 2 business days to schedule the initial discovery session with the storyteller.
            </p>
          </div>
        </div>

        <div class="flex items-start gap-4">
          <div class="flex-shrink-0 w-10 h-10 bg-brand-navy text-warm-parchment rounded-full flex items-center justify-center font-bold">
            4
          </div>
          <div>
            <h3 class="text-xl font-bold font-open-sauce mb-2">Begin the Journey</h3>
            <p class="font-open-sauce text-gray-700">
              The storyteller will receive their personal welcome package and can begin conversations with Peg at their own pace.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Support Section -->
    <section class="text-center bg-zinc-100 rounded-lg p-8 mb-12">
      <h2 class="text-2xl font-migra text-brand-black mb-4">Questions or Need Support?</h2>
      <p class="font-open-sauce text-gray-700 mb-6">
        Our team is here to help every step of the way.
      </p>
      <a href="mailto:support@storysmith.work" class="inline-block bg-brand-navy text-warm-parchment font-open-sauce uppercase tracking-wider py-3 px-8 hover:bg-opacity-90 transition-colors rounded-md">
        Contact Support
      </a>
    </section>

    <!-- The Promise -->
    <section class="text-center border-2 border-vital-lime rounded-lg p-8 bg-lime-50">
      <div class="flex justify-center mb-4">
        <svg class="w-12 h-12 text-vital-lime" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z" />
        </svg>
      </div>
      <h3 class="text-2xl font-migra text-brand-black mb-3">Our "First Conversation" Promise</h3>
      <p class="font-open-sauce text-gray-700">
        If the storyteller doesn't love their first conversation with Peg, we'll refund your purchase in full. No questions asked.
      </p>
    </section>

    <!-- Return Home -->
    <div class="text-center mt-12">
      <a href="/" class="text-brand-navy font-bold uppercase tracking-wider font-open-sauce hover:underline">
        ‚Üê Return to Homepage
      </a>
    </div>
  </main>
</Layout>

<script>
  // Get session_id from URL if needed for future tracking
  const urlParams = new URLSearchParams(window.location.search);
  const sessionId = urlParams.get('session_id');

  if (sessionId) {
    // You could use this to fetch session details or track the conversion
    console.log('Checkout session:', sessionId);
  }
</script>
