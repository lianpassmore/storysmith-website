<header 
  id="main-header" 
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-500 ease-in-out bg-transparent py-6"
>
  <nav class="container mx-auto px-6">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="z-10 group">
        <img 
          id="header-logo"
          src="/storysmith-logo-white.png" 
          alt="StorySmith Logo" 
          class="h-12 w-auto transition-all duration-300"
        >
      </a>

      <!-- Desktop Navigation -->
      <ul id="nav-links" class="hidden md:flex items-center gap-8 font-sans uppercase tracking-widest text-xs font-bold text-white transition-colors duration-300">
        <li><a href="/legacy" class="hover:text-brand-peach transition-colors">The Spoken Legacy</a></li>
        <li><a href="/premium" class="hover:text-brand-peach transition-colors">Premium Podcast</a></li>
        <li><a href="/our-philosophy" class="hover:text-brand-peach transition-colors">Our Philosophy</a></li>
        <li><a href="/contact" class="hover:text-brand-peach transition-colors">Contact</a></li>
      </ul>
      
      <!-- Mobile Menu Button -->
      <button id="mobile-menu-button" class="md:hidden text-white z-10" aria-label="Toggle menu">
        <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>
      </button>
    </div>
  </nav>
</header>

<!-- Mobile Menu -->
<div id="mobile-menu" class="fixed inset-0 bg-brand-navy/95 z-40 transform translate-x-full transition-transform duration-300 md:hidden flex items-center justify-center">
  <ul class="flex flex-col items-center gap-8 text-white text-2xl font-serif">
    <li><a href="/legacy">The Spoken Legacy</a></li>
    <li><a href="/premium">Premium Podcast</a></li>
    <li><a href="/contact">Contact</a></li>
  </ul>
</div>

<style>
  /* This filter turns a white image into a dark navy color */
  .logo-dark-filter {
    filter: brightness(0) saturate(100%) invert(16%) sepia(33%) saturate(1625%) hue-rotate(193deg) brightness(95%) contrast(93%);
  }
</style>

<script>
  const header = document.getElementById('main-header');
  const navLinks = document.getElementById('nav-links');
  const logo = document.getElementById('header-logo');
  const mobileBtn = document.getElementById('mobile-menu-button');

  // --- CONFIGURATION: FORCE WHITE HEADER ON THESE PAGES ---
  const forceWhitePages = [
    '/contact', 
    '/discover', 
    '/legacy-purchase', 
    '/podcast-discovery-call',
    '/premium-qualifier',
    '/privacy',
    '/terms',
    '/purchase-success'
  ];

  // Check if current page is in the list
  const currentPath = window.location.pathname;
  const isAlwaysWhite = forceWhitePages.some(page => currentPath.includes(page));

  function setWhiteHeader() {
    header?.classList.remove('bg-transparent', 'py-6');
    header?.classList.add('bg-white', 'shadow-md', 'py-3');
    
    navLinks?.classList.remove('text-white');
    navLinks?.classList.add('text-brand-navy');
    
    mobileBtn?.classList.remove('text-white');
    mobileBtn?.classList.add('text-brand-navy');

    logo?.classList.add('logo-dark-filter');
  }

  function setTransparentHeader() {
    header?.classList.add('bg-transparent', 'py-6');
    header?.classList.remove('bg-white', 'shadow-md', 'py-3');
    
    navLinks?.classList.add('text-white');
    navLinks?.classList.remove('text-brand-navy');

    mobileBtn?.classList.add('text-white');
    mobileBtn?.classList.remove('text-brand-navy');

    logo?.classList.remove('logo-dark-filter');
  }

  // 1. RUN ON LOAD
  if (isAlwaysWhite) {
    setWhiteHeader();
  } else {
    // Run logic based on current scroll position (in case user refreshed halfway down)
    if (window.scrollY > 50) setWhiteHeader();
    else setTransparentHeader();
  }

  // 2. RUN ON SCROLL
  window.addEventListener('scroll', () => {
    // If this is a "Force White" page, ignore scrolling logic. Keep it white.
    if (isAlwaysWhite) return;

    if (window.scrollY > 50) {
      setWhiteHeader();
    } else {
      setTransparentHeader();
    }
  });
</script>